inherit allarch

require conf/distro/include/partitions.inc

S = "${WORKDIR}"

generate_systeminfo() {
    sed " \
         s/@PARTITION_LAYOUT_MAJOR_VERSION@/${PARTITION_LAYOUT_MAJOR_VERSION}/g; \
         s/@PARTITION_LAYOUT_MINOR_VERSION@/${PARTITION_LAYOUT_MINOR_VERSION}/g; \
         s/@MAINBOOT_PARTITION_NUMBER@/${MAINBOOT_PARTITION_NUMBER}/g; \
         s/@MAINROOTFS_PARTITION_NUMBER@/${MAINROOTFS_PARTITION_NUMBER}/g; \
         s/@MAINCONFIGFS_PARTITION_NUMBER@/${MAINCONFIGFS_PARTITION_NUMBER}/g; \
         s/@MAINCONFIGFS_TYPE@/${MAINCONFIGFS_TYPE}/g; \
         s/@MAINCONFIGFS_MKFS_EXTRA@/${MAINCONFIGFS_MKFS_EXTRA}/g; \
         s/@RECOVERYBOOT_PARTITION_NUMBER@/${RECOVERYBOOT_PARTITION_NUMBER}/g; \
         s/@RECOVERYDATAFS_PARTITION_NUMBER@/${RECOVERYDATAFS_PARTITION_NUMBER}/g; \
         s/@RECOVERYDATAFS_TYPE@/${RECOVERYDATAFS_TYPE}/g; \
         s/@RECOVERYDATAFS_MKFS_EXTRA@/${RECOVERYDATAFS_MKFS_EXTRA}/g; \
         s/@SPAREFS_PARTITION_NUMBER@/${SPAREFS_PARTITION_NUMBER}/g; \
         s/@SPAREFS_TYPE@/${SPAREFS_TYPE}/g; \
         s/@SPAREFS_MKFS_EXTRA@/${SPAREFS_MKFS_EXTRA}/g; \
         " \
        ${WORKDIR}/systeminfo.rc.in >${D}${sysconfdir}/systeminfo.rc
}
